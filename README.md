## Phased Array Ultrasonic Signal Generator
Bachelor's thesis at HHU in 2015, partly reorganized in 2025.
### Abstract
### 0. Hardware and Package Structure
* Hardware: Cyclone IV E (Altera)
* Package Structure:

```
${project_workspace}/
├── /
│   ├── 
│   └── /
│       ├── 
│       ├── 
│       ├── 
├── 
├── 
├── 
└── README.md               
```
### 1. Simplified Phased Array Ultrasound Signal Generator System
#### 1.1 Functional Block Diagram
![Functional Block Diagram of Simplified Phased Array Ultrasound Signal Generator System-1](assets/fig_1.png)

* `xkz_a` is the core generator module realized by VHDL/Verilog:
![Functional Block Diagram of Simplified Phased Array Ultrasound Signal Generator System-2](assets/fig_2.png)

#### 1.2 Control Signals

* ASCII Codes of 13 Control Signals for Simplified Phased Array Ultrasound Signal Generator:

| Character Symbol | ASCII Code (Decimal) | ASCII Code (Binary) |
| :--- | :---: | :---: |
| 0 | 48 | 00110000 |
| 1 | 49 | 00110001 |
| 2 | 50 | 00110010 |
| 3 | 51 | 00110011 |
| 4 | 52 | 00110100 |
| 5 | 53 | 00110101 |
| 6 | 54 | 00110110 |
| 7 | 55 | 00110111 |
| 8 | 56 | 00111000 |
| 9 | 57 | 00111001 |
| a | 97 | 01100001 |
| b | 98 | 01100010 |
| c | 99 | 01100011 |

##### 1.2.1 Phase Modulation Control

* Relationship between 8-bit Input $s$ and Phase Modulation Count $d$:

| 8-bit Input $s$ | Phase Modulation Count $d$ |
| :---: | :---: |
| 00110000 | 1 |
| 00110001 | 2 |
| 00110010 | 3 |
| 00110011 | 4 |
| 00110100 | 5 |
| 00110101 | 6 |
| 00110110 | 7 |
| 00110111 | 8 |
| 00111000 | 9 |
| 00111001 | 10 |

* Relationship between Phase Modulation Count $d$ and Phase Modulation Interval $\Delta t$:

| Phase Modulation Count $d$ | Phase Modulation Interval $\Delta t$ (Phase Delay $\tau_s$) |
| :---: | :--- |
| 1 | 40ns (2 Clock Cycles) |
| 2 | 60ns (3 Clock Cycles) |
| 3 | 80ns (4 Clock Cycles) |
| 4 | 100ns (5 Clock Cycles) |
| 5 | 120ns (6 Clock Cycles) |
| 6 | 140ns (7 Clock Cycles) |
| 7 | 160ns (8 Clock Cycles) |
| 8 | 180ns (9 Clock Cycles) |
| 9 | 200ns (10 Clock Cycles) |
| 10 | 220ns (11 Clock Cycles) |

##### 1.2.2 Pulse Width Modulation (PWM) Control

* Relationship between 8-bit Input $s$ and Pulse Width Count $e$:

| 8-bit Input $s$ | Pulse Width Count $e$ |
| :---: | :---: |
| 00110000 | 1 |
| 00110001 | 2 |
| 00110010 | 3 |
| 00110011 | 4 |
| 00110100 | 5 |
| 00110101 | 6 |
| 00110110 | 7 |
| 00110111 | 8 |
| 00111000 | 9 |
| 00111001 | 10 |

* Relationship between Pulse Width Count $e$, Pulse Width, and the Applicable Transducer Center Frequency for the Pulse

| Pulse Width Count $e$ | Pulse Width | Applicable Transducer Center Frequency |
| :---: | :---: | :---: |
| 1 | 20ns | 25MHz |
| 2 | 40ns | 12.5MHz |
| 3 | 60ns | 8MHz |
| 4 | 80ns | 6MHz |
| 5 | 100ns | 5MHz |
| 6 | 120ns | 4MHz |
| 7 | 140ns | 3.6MHz |
| 8 | 160ns | 3.1MHz |
| 9 | 180ns | 2.8MHz |
| 10 | 200ns | 2.5MHz |

#### 1.3 FPGA Implementation and RTL
The figure below shows the Register Transfer Level (RTL) diagram of the entire system, generated by the Quartus II software. The FPGA implementation method of the simplified phased array ultrasound signal generator can be seen directly from the RTL diagram:
![rtl_simp](assets/rtl_simp.png)

#### 1.4 Control Terminal
##### 1.4.1 Host Computer and Serial Communication Module
See [there](https://github.com/nicewang/Phased-Array-Ultrasonic-Signal-Generator/tree/gui#gui
).

### 2. Improved Phased Array Ultrasound Signal Generator System
#### 2.1 Functional Block Diagram
![Functional Block Diagram of Improved Phased Array Ultrasound Signal Generator System](assets/fig_3.png)

### 3. Peripheral Circuit Module Design
#### 3.1 Amplification Circuit
* Schematic Diagram of Adjustable Vcc Core Circuit:
![vcc_1](assets/vcc_1.png)
* Complete Schematic Diagram of Adjustable Vcc Circuit:
![vcc_2](assets/vcc_2.png)
* PCB Layout of Adjustable Vcc Circuit:
![vcc_pcb](assets/vcc_pcb.png)

### 4. Simulation Diagram (Waveform)
ModelSim Simulation Waveforms
#### 4.1 Simplified Phased Array Ultrasound Signal Generator
##### 4.1.1 Phase Modulation Simulation
* Phase Modulation Simulation Diagram (Pulse Width: 20ns):
![pm_20ns](assets/pm_20ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 40ns):
![pm_40ns](assets/pm_40ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 60ns):
![pm_60ns](assets/pm_60ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 80ns):
![pm_80ns](assets/pm_80ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 100ns):
![pm_100ns](assets/pm_100ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 120ns):
![pm_120ns](assets/pm_120ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 140ns):
![pm_140ns](assets/pm_140ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 160ns):
![pm_160ns](assets/pm_160ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 180ns):
![pm_180ns](assets/pm_180ns.png)
* Phase Modulation Simulation Diagram (Pulse Width: 200ns):
![pm_200ns](assets/pm_200ns.png)

##### 4.1.2 Pulse Width Modulation (PWM) Simulation
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 40ns):
![pwm_40ns](assets/pwm_40ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 60ns):
![pwm_60ns](assets/pwm_60ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 80ns):
![pwm_80ns](assets/pwm_80ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 100ns):
![pwm_100ns](assets/pwm_100ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 120ns):
![pwm_120ns](assets/pwm_120ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 140ns):
![pwm_140ns](assets/pwm_140ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 160ns):
![pwm_160ns](assets/pwm_160ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 180ns):
![pwm_180ns](assets/pwm_180ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 200ns):
![pwm_200ns](assets/pwm_200ns.png)
* Pulse Width Modulation Simulation Diagram (Phase Modulation Interval: 220ns):
![pm_220ns](assets/pwm_220ns.png)

#### 4.2 Improved Phased Array Ultrasound Signal Generator
### 5. Real-World Acoustic Experiments
#### 5.1 Physical Setup
![phy_setup_1](assets/phy_setup_1.png)
![phy_setup_2](assets/phy_setup_2.png)
#### 5.2 Acoustic Experiment Waveforms
* Pulse Transmitted by Transducer Excited by a Pulse with a Period of 500μs and a Pulse Width of 200ns:
![exp_pm_500us_1](assets/exp_pm_500us_1.png)
![exp_pm_500us_2](assets/exp_pm_500us_2.png)
* Pulse Transmitted by Transducer Excited by a Pulse with a Period of 1ms and a Pulse Width of 200ns:
![exp_pm_1ms_1](assets/exp_pm_1ms_1.png)
![exp_pm_1ms_2](assets/exp_pm_1ms_2.png)